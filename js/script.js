const quantities=document.querySelectorAll(".quantity");quantities&&quantities.forEach(e=>{parseInt(window.innerWidth);const t=e.querySelector(".quantity-minus"),o=e.querySelector(".quantity-plus"),r=e.querySelector(".quantity-counter");let s,a;t.addEventListener("click",()=>{const e=parseInt(r.value);clearInterval(s),e>+r.min&&(r.value=String(e-1)),cartPricesRefresh()}),o.addEventListener("click",()=>{const e=parseInt(r.value);e<+r.max&&(r.value=String(e+1)),cartPricesRefresh()}),["mousedown","touchstart"].forEach(e=>{o.addEventListener(e,()=>{a=setInterval(()=>{const e=parseInt(r.value);e<+r.max&&(r.value=String(e+1)),cartPricesRefresh()},100)}),t.addEventListener(e,()=>{s=setInterval(()=>{const e=parseInt(r.value);e>+r.min&&(r.value=String(e-1)),cartPricesRefresh()},100)})}),["mouseup","touchend"].forEach(e=>{document.addEventListener(e,()=>{clearInterval(a),cartPricesRefresh()}),document.addEventListener(e,()=>{clearInterval(s),cartPricesRefresh()})}),r.addEventListener("change",(function(){const e=parseInt(r.value),t=r.min,o=r.max;e?e<t?r.value=t:e>o&&(r.value=o):r.value=t,cartPricesRefresh()}))});const books=document.querySelectorAll(".book");books.forEach((function(e){const t=e.querySelectorAll(".book__category-link"),o=e.querySelector(".book__price");t.forEach(e=>{"скидки"==e.textContent.toLowerCase().trimStart().trimEnd()&&o.classList.add("discount")})}));let totalPrice=0,deliveryPrice=0,booksPrice=0,discountPrice=0;function calculateDeliveryPrice(){deliveryPrice=0;const e=document.querySelectorAll(".custom-radio");e&&e.forEach(e=>{if(e.checked){const t=e.parentNode.querySelector(".cart__delivery-price");if(t){const e=parseInt(t.textContent);deliveryPrice=e||0}}})}const setBooksPrice=()=>{const e=document.getElementById("cart-books-price");e&&(e.textContent=String(booksPrice))},setDeliveryPrice=()=>{const e=document.getElementById("cart-delivery-price");e&&(e.textContent=String(deliveryPrice))},setDiscountPrice=()=>{const e=document.getElementById("cart-discount-price");e&&(e.textContent=0==discountPrice?"0":"-"+String(discountPrice))},setTotalPrice=()=>{const e=document.getElementById("cart-total-price");e&&(e.textContent=String(totalPrice))};function calculateAnotherPrices(){booksPrice=discountPrice=0;const e=document.querySelectorAll(".cart__item");e&&e.forEach(e=>{const t=e.querySelector(".book__price"),o=parseInt(e.querySelector(".cart__price-counter").value),r=parseInt(t.textContent),s=parseInt(t.dataset.oldPrice);s?(booksPrice+=o*s,discountPrice+=o*(s-r)):r&&(booksPrice+=o*r)}),totalPrice=deliveryPrice+booksPrice-discountPrice}function cartPricesRefresh(){if(calculateDeliveryPrice(),calculateAnotherPrices(),setBooksPrice(),setDeliveryPrice(),setDiscountPrice(),setTotalPrice(),0==booksPrice){const e=document.querySelector(".cart__sidebar-checkout-order");e&&e.setAttribute("disabled","")}}cartPricesRefresh();const customRadios=document.querySelectorAll(".custom-radio");customRadios&&customRadios.forEach(e=>{e.addEventListener("change",(function(e){cartPricesRefresh()}))});const customRadioLabels=document.querySelectorAll(".custom-radio-label");if(customRadios&&customRadioLabels)for(let e=0;e<customRadios.length;++e)customRadios[e].id="custom-radio-"+(e+1),customRadioLabels[e].setAttribute("for","custom-radio-"+(e+1));function magnify(e,t){var o,r,s;function a(a){var c,n,l;a.preventDefault(),c=function(t){var o,r=0,s=0;return t=t||window.event,o=e.getBoundingClientRect(),r=t.pageX-o.left,s=t.pageY-o.top,r-=window.pageXOffset,s-=window.pageYOffset,{x:r,y:s}}(a),n=c.x,l=c.y,n>e.width-r/t&&(n=e.width-r/t),n<r/t&&(n=r/t),l>e.height-s/t&&(l=e.height-s/t),l<s/t&&(l=s/t),o.style.left=n-r+"px",o.style.top=l-s+"px",o.style.backgroundPosition="-"+(n*t-r+3)+"px -"+(l*t-s+3)+"px"}(o=document.createElement("div")).setAttribute("class","img-magnifier-glass"),e.parentElement.insertBefore(o,e),o.style.backgroundImage="url('"+e.src+"')",o.style.backgroundRepeat="no-repeat",o.style.backgroundSize=e.width*t+"px "+e.height*t+"px",r=o.offsetWidth/2,s=o.offsetHeight/2,o.addEventListener("mousemove",a),e.addEventListener("mousemove",a)}const galleryPreviewImages=document.querySelectorAll(".gallery__preview-img");if(galleryPreviewImages)for(let e of galleryPreviewImages)magnify(e,2);let cartItemQuantity=3;const increaseToCartQuantity=()=>{const e=document.querySelector(".to-cart__quantity"),t=document.getElementById("cart__item-count");cartItemQuantity++,t&&(t.textContent=cartItemQuantity),e&&(e.textContent=String(cartItemQuantity))},decreaseToCartQuantity=()=>{const e=document.querySelector(".to-cart__quantity"),t=document.getElementById("cart__item-count");cartItemQuantity--,t&&(t.textContent=cartItemQuantity),e&&(e.textContent=String(cartItemQuantity))},wishButtons=document.querySelectorAll(".wish-button");wishButtons.forEach(e=>e.addEventListener("click",(function(){e.classList.toggle("favorite")})));const bookButtons=document.querySelectorAll(".book__button");bookButtons&&bookButtons.forEach(e=>{e.addEventListener("click",(function(e){this.classList.toggle("disabled");this.closest(".book").classList.toggle("booked"),increaseToCartQuantity()}))});const productButtonOrder=document.querySelector(".product-about__cart-item");productButtonOrder&&productButtonOrder.addEventListener("click",(function(e){this.classList.toggle("disabled")}));const catalogContentTags=document.querySelectorAll(".catalog__content-tag");catalogContentTags.forEach((e,t)=>{e.dataset.index=t});const catalogCategories=document.querySelectorAll(".catalog__content-categories");catalogContentTags.forEach(e=>{const t=["mouseover","click","keydown"];for(iteration of t)e.addEventListener(iteration,(function(e){for(let e of catalogContentTags)e.classList.remove("current");for(let e of catalogCategories)e.classList.remove("current");catalogCategories[this.dataset.index].classList.add("current"),this.classList.add("current")}))});const catalogBurger=document.querySelector(".catalog__burger");if(catalogBurger){const e=document.querySelector(".catalog__content");catalogBurger.addEventListener("click",()=>{catalogBurger.classList.toggle("active"),e.classList.toggle("active"),e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"})}const cleanAllButton=document.getElementById("cart__clean-all");cleanAllButton&&cleanAllButton.addEventListener("click",(function(){document.querySelectorAll(".cart__item").forEach(e=>{e&&(e.remove(),decreaseToCartQuantity())}),cartPricesRefresh()}));const cleanButtons=document.querySelectorAll(".cart__clean");cleanButtons&&cleanButtons.forEach(e=>{e.addEventListener("click",(function(){const e=this.closest(".cart__item");e&&(decreaseToCartQuantity(),e.remove(),cartPricesRefresh())}))});const filterControls=document.querySelectorAll(".filter__control");filterControls.forEach(e=>{e.addEventListener("click",t=>{const o=e.parentNode,r=o.querySelector(".filter__control"),s=o.querySelector(".filter__content");o.classList.toggle("open"),o.classList.contains("open")?(r.setAttribute("aria-expanded",!0),s.setAttribute("aria-hidden",!1),s.style.maxHeight=s.scrollHeight+"px"):(r.setAttribute("aria-expanded",!1),s.setAttribute("aria-hidden",!0),s.style.maxHeight=null)})});const sidebarControl=document.querySelector(".sidebar__control");if(sidebarControl){const e=sidebarControl.parentNode,t=e.querySelector(".sidebar__control"),o=e.querySelector(".sidebar__content");e.classList.add("open"),e.classList.contains("open")&&(t.setAttribute("aria-expanded",!0),o.setAttribute("aria-hidden",!1),o.style.maxHeight="100%"),sidebarControl.addEventListener("click",e=>{const t=sidebarControl.parentNode,o=t.querySelector(".sidebar__control"),r=t.querySelector(".sidebar__content");t.classList.toggle("open"),t.classList.contains("open")?(o.setAttribute("aria-expanded",!0),r.setAttribute("aria-hidden",!1),r.style.maxHeight="100%"):(o.setAttribute("aria-expanded",!1),r.setAttribute("aria-hidden",!0),r.style.maxHeight=null)})}const galleries=document.querySelectorAll(".gallery");galleries.forEach(e=>{const t=e.querySelectorAll(".gallery__thumbnails-img"),o=e.querySelector(".gallery__preview-img");t.forEach(e=>{e.addEventListener("mouseover",(function(e){for(let e of t)e.parentNode.classList.remove("current");this.parentNode.classList.add("current");const r=this.getAttribute("src"),s=document.querySelector(".img-magnifier-glass");s&&(s.style.backgroundImage=`url("${r}")`),o.setAttribute("src",""+r)}))})});const body=document.querySelector("body"),headerTopBurger=document.querySelector(".header-top__burger"),headerTop=document.querySelector(".header-top"),headerTopNav=document.querySelector(".header-top__nav"),headerTopList=document.querySelector(".header-top__list");headerTopBurger.addEventListener("click",(function(){const e=function(){body.classList.remove("body-lock"),headerTopBurger.classList.remove("active"),headerTop.classList.remove("active"),headerTopNav.classList.remove("active"),headerTopList.classList.remove("active")};this.classList.contains("active")?e():(body.classList.add("body-lock"),headerTopBurger.classList.add("active"),headerTop.classList.add("active"),headerTopNav.classList.add("active"),headerTopList.classList.add("active")),headerTop.classList.contains("active")&&document.addEventListener("click",(function(t){t.target.classList.contains("header-top")&&e()}))}));const catalogContentCategories=document.querySelectorAll(".catalog__content-categories");catalogContentCategories.forEach((e,t)=>{e.dataset.index=t});for(let e=0;e<catalogContentCategories.length;e++){Macy({container:`.catalog__content-categories[data-index="${e}"]`,trueOrder:!1,margin:40,columns:3,breakAt:{1180:{columns:2},1024:{columns:1},768:{columns:2},576:{columns:1}}})}const booksSliderButtonsNext=document.querySelectorAll(".books__slider-button-next");booksSliderButtonsNext.forEach((function(e,t){e.classList.add("books__slider-button-next--"+t)}));const booksSliderButtonsPrev=document.querySelectorAll(".books__slider-button-prev");booksSliderButtonsPrev.forEach((function(e,t){e.classList.add("books__slider-button-prev--"+t)}));const booksSliders=document.querySelectorAll(".books__slider-container");booksSliders.forEach((function(e,t){e.classList.add("books__slider-container--"+t),new Swiper(".books__slider-container--"+t,{loop:!1,speed:500,spaceBetween:40,slidesPerView:5,allowTouchMove:!1,wrapperClass:"books__slider-wrapper",slideClass:"book",slideActiveClass:"book--active",slideNextClass:"book-next",slidePrevClass:"book-prev",slideVisibleClass:"book--visible",breakpoints:{1369:{slidesPerView:5,spaceBetween:40},1025:{slidesPerView:4,spaceBetween:30},769:{slidesPerView:3,spaceBetween:20},481:{slidesPerView:2,spaceBetween:20},0:{slidesPerView:1,spaceBetween:20}},navigation:{nextEl:".books__slider-button-next--"+t,prevEl:".books__slider-button-prev--"+t,disabledClass:"slider-button-disabled"}})}));const rangeSlider=document.querySelector(".sidebar-filter__slider");if(rangeSlider){noUiSlider.create(rangeSlider,{start:[200,950],range:{min:[0],max:[2e3]},connect:!0});const e=document.querySelectorAll(".sidebar-filter__range-control"),t=[e[0],e[1]];rangeSlider.noUiSlider.on("update",(function(e,o){t[o].value=Math.round(e[o])}));const o=(e,t)=>{let o=[null,null];o[e]=t,rangeSlider.noUiSlider.set(o)};t.forEach((e,t)=>{e.addEventListener("change",e=>{o(t,e.currentTarget.value)})})}const sellsSlider=new Swiper(".sells__slider-container",{loop:!0,speed:500,autoplay:!0,autoplay:{delay:6e3},slidesPerView:1,allowTouchMove:!0,wrapperClass:"sells__slider-wrapper",slideClass:"sells__slider-item",slideActiveClass:"sells__slider-item--active",slideNextClass:"sells__slider-item-next",slidePrevClass:"sells__slider-item-prev",slideVisibleClass:"sells__slider-item--visible",breakpoints:{1025:{allowTouchMove:!1}},pagination:{el:".sells__slider-pagination",type:"bullets",bulletClass:"sells__slider-bullet",bulletActiveClass:"sells__slider-bullet--active",clickable:!0},navigation:{nextEl:".sells__slider-button-next",prevEl:".sells__slider-button-prev",disabledClass:"slider-button-disabled"}}),sellsSliderSelector=document.querySelector(".sells__slider-container");sellsSliderSelector&&(sellsSliderSelector.addEventListener("mouseover",()=>{sellsSlider.autoplay.stop()}),sellsSliderSelector.addEventListener("mouseleave",()=>{sellsSlider.autoplay.start()}));